generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum DEPARTMENTNAME {
  AE
  AIML
  AS
  C_CYCLE  @map("C-CYCLE")
  CG
  CH
  CSE
  CV
  DSE
  ECE
  ECE_ACT  @map("ECE-ACT")
  EEE
  IIOT
  ISE
  ME
  P_CYCLE  @map("P-CYCLE")
  VLSI
}


model department {
  name DEPARTMENTNAME @id
  scores Score[]
}

enum SPORTS{
  BADMINTON
  FOOTBALL
  BASKETBALL
  KHO_KHO
  KABBADI
  VOLLEYBALL
  TABLE_TENNIS
  CHESS 
  CARROM
  THROWBALL
  BOX_CRICKET
}

enum Gender {
  MALE
  FEMALE
}
model Sport_event {
  id String @id @default(cuid())
  name SPORTS
  solo Boolean @default(false)
  additional_data_name String
  gender Gender
  scores Score[]
}

model Score {
  id String @id @default(cuid())
  event_id String
  department_id DEPARTMENTNAME
  matches Int @default(0)
  wins Int @default(0)
  losses Int @default(0)
  draws Int @default(0)
  points Int @default(0)
  additional_data Json? 
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  event Sport_event @relation(fields: [event_id], references: [id])
  department department @relation(fields: [department_id], references: [name])

  @@unique([event_id, department_id])
}
